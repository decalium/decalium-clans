--- a/net/minecraft/server/dedicated/DedicatedServerSettings.java
+++ b/net/minecraft/server/dedicated/DedicatedServerSettings.java
@@ -3,13 +3,21 @@
 import java.nio.file.Path;
 import java.util.function.UnaryOperator;
 
+// CraftBukkit start
+import java.io.File;
+import joptsimple.OptionSet;
+// CraftBukkit end
+
 public class DedicatedServerSettings {
+
     private final Path source;
     private DedicatedServerProperties properties;
 
-    public DedicatedServerSettings(Path path) {
-        this.source = path;
-        this.properties = DedicatedServerProperties.fromFile(path);
+    // CraftBukkit start
+    public DedicatedServerSettings(OptionSet optionset) {
+        this.source = ((File) optionset.valueOf("config")).toPath();
+        this.properties = DedicatedServerProperties.load(source, optionset);
+        // CraftBukkit end
     }
 
     public DedicatedServerProperties getProperties() {
@@ -20,8 +28,8 @@
         this.properties.store(this.source);
     }
 
-    public DedicatedServerSettings update(UnaryOperator<DedicatedServerProperties> unaryOperator) {
-        (this.properties = unaryOperator.apply(this.properties)).store(this.source);
+    public DedicatedServerSettings update(UnaryOperator<DedicatedServerProperties> unaryoperator) {
+        (this.properties = (DedicatedServerProperties) unaryoperator.apply(this.properties)).store(this.source);
         return this;
     }
 }
