--- a/net/minecraft/world/level/block/entity/BannerBlockEntity.java
+++ b/net/minecraft/world/level/block/entity/BannerBlockEntity.java
@@ -10,6 +10,7 @@
 import net.minecraft.network.chat.Component;
 import net.minecraft.network.chat.TranslatableComponent;
 import net.minecraft.network.protocol.game.ClientboundBlockEntityDataPacket;
+import net.minecraft.server.MCUtil;
 import net.minecraft.world.Nameable;
 import net.minecraft.world.item.DyeColor;
 import net.minecraft.world.item.ItemStack;
@@ -18,22 +19,23 @@
 import net.minecraft.world.level.block.state.BlockState;
 
 public class BannerBlockEntity extends BlockEntity implements Nameable {
+
     public static final int MAX_PATTERNS = 6;
     public static final String TAG_PATTERNS = "Patterns";
     public static final String TAG_PATTERN = "Pattern";
     public static final String TAG_COLOR = "Color";
     @Nullable
     private Component name;
-    private DyeColor baseColor;
+    public DyeColor baseColor;
     @Nullable
-    private ListTag itemPatterns;
+    public ListTag itemPatterns;
     private boolean receivedData;
     @Nullable
     private List<Pair<BannerPattern, DyeColor>> patterns;
 
     public BannerBlockEntity(BlockPos pos, BlockState state) {
         super(BlockEntityType.BANNER, pos, state);
-        this.baseColor = ((AbstractBannerBlock)state.getBlock()).getColor();
+        this.baseColor = ((AbstractBannerBlock) state.getBlock()).getColor();
     }
 
     public BannerBlockEntity(BlockPos pos, BlockState state, DyeColor baseColor) {
@@ -43,28 +45,31 @@
 
     @Nullable
     public static ListTag getItemPatterns(ItemStack stack) {
-        ListTag listTag = null;
-        CompoundTag compoundTag = stack.getTagElement("BlockEntityTag");
-        if (compoundTag != null && compoundTag.contains("Patterns", 9)) {
-            listTag = compoundTag.getList("Patterns", 10).copy();
+        ListTag nbttaglist = null;
+        CompoundTag nbttagcompound = stack.getTagElement("BlockEntityTag");
+
+        if (nbttagcompound != null && nbttagcompound.contains("Patterns", 9)) {
+            nbttaglist = nbttagcompound.getList("Patterns", 10).copy();
         }
 
-        return listTag;
+        return nbttaglist;
     }
 
     public void fromItem(ItemStack stack, DyeColor baseColor) {
-        this.itemPatterns = getItemPatterns(stack);
+        this.itemPatterns = BannerBlockEntity.getItemPatterns(stack);
         this.baseColor = baseColor;
         this.patterns = null;
         this.receivedData = true;
         this.name = stack.hasCustomHoverName() ? stack.getHoverName() : null;
     }
 
+    @Override
     public Component getName() {
-        return (Component)(this.name != null ? this.name : new TranslatableComponent("block.minecraft.banner"));
+        return (Component) (this.name != null ? this.name : new TranslatableComponent("block.minecraft.banner"));
     }
 
     @Nullable
+    @Override
     public Component getCustomName() {
         return this.name;
     }
@@ -73,6 +78,7 @@
         this.name = customName;
     }
 
+    @Override
     public CompoundTag save(CompoundTag nbt) {
         super.save(nbt);
         if (this.itemPatterns != null) {
@@ -86,34 +92,43 @@
         return nbt;
     }
 
+    @Override
     public void load(CompoundTag nbt) {
         super.load(nbt);
         if (nbt.contains("CustomName", 8)) {
-            this.name = Component.Serializer.fromJson(nbt.getString("CustomName"));
+            this.name = MCUtil.getBaseComponentFromNbt("CustomName", nbt); // Paper - Catch ParseException
         }
 
         this.itemPatterns = nbt.getList("Patterns", 10);
+        // CraftBukkit start
+        while (this.itemPatterns.size() > 20) {
+            this.itemPatterns.remove(20);
+        }
+        // CraftBukkit end
         this.patterns = null;
         this.receivedData = true;
     }
 
     @Nullable
+    @Override
     public ClientboundBlockEntityDataPacket getUpdatePacket() {
         return new ClientboundBlockEntityDataPacket(this.worldPosition, 6, this.getUpdateTag());
     }
 
+    @Override
     public CompoundTag getUpdateTag() {
         return this.save(new CompoundTag());
     }
 
     public static int getPatternCount(ItemStack stack) {
-        CompoundTag compoundTag = stack.getTagElement("BlockEntityTag");
-        return compoundTag != null && compoundTag.contains("Patterns") ? compoundTag.getList("Patterns", 10).size() : 0;
+        CompoundTag nbttagcompound = stack.getTagElement("BlockEntityTag");
+
+        return nbttagcompound != null && nbttagcompound.contains("Patterns") ? nbttagcompound.getList("Patterns", 10).size() : 0;
     }
 
     public List<Pair<BannerPattern, DyeColor>> getPatterns() {
         if (this.patterns == null && this.receivedData) {
-            this.patterns = createPatterns(this.baseColor, this.itemPatterns);
+            this.patterns = BannerBlockEntity.createPatterns(this.baseColor, this.itemPatterns);
         }
 
         return this.patterns;
@@ -121,14 +136,17 @@
 
     public static List<Pair<BannerPattern, DyeColor>> createPatterns(DyeColor baseColor, @Nullable ListTag patternListTag) {
         List<Pair<BannerPattern, DyeColor>> list = Lists.newArrayList();
+
         list.add(Pair.of(BannerPattern.BASE, baseColor));
         if (patternListTag != null) {
-            for(int i = 0; i < patternListTag.size(); ++i) {
-                CompoundTag compoundTag = patternListTag.getCompound(i);
-                BannerPattern bannerPattern = BannerPattern.byHash(compoundTag.getString("Pattern"));
-                if (bannerPattern != null) {
-                    int j = compoundTag.getInt("Color");
-                    list.add(Pair.of(bannerPattern, DyeColor.byId(j)));
+            for (int i = 0; i < patternListTag.size(); ++i) {
+                CompoundTag nbttagcompound = patternListTag.getCompound(i);
+                BannerPattern enumbannerpatterntype = BannerPattern.byHash(nbttagcompound.getString("Pattern"));
+
+                if (enumbannerpatterntype != null) {
+                    int j = nbttagcompound.getInt("Color");
+
+                    list.add(Pair.of(enumbannerpatterntype, DyeColor.byId(j)));
                 }
             }
         }
@@ -137,12 +155,14 @@
     }
 
     public static void removeLastPattern(ItemStack stack) {
-        CompoundTag compoundTag = stack.getTagElement("BlockEntityTag");
-        if (compoundTag != null && compoundTag.contains("Patterns", 9)) {
-            ListTag listTag = compoundTag.getList("Patterns", 10);
-            if (!listTag.isEmpty()) {
-                listTag.remove(listTag.size() - 1);
-                if (listTag.isEmpty()) {
+        CompoundTag nbttagcompound = stack.getTagElement("BlockEntityTag");
+
+        if (nbttagcompound != null && nbttagcompound.contains("Patterns", 9)) {
+            ListTag nbttaglist = nbttagcompound.getList("Patterns", 10);
+
+            if (!nbttaglist.isEmpty()) {
+                nbttaglist.remove(nbttaglist.size() - 1);
+                if (nbttaglist.isEmpty()) {
                     stack.removeTagKey("BlockEntityTag");
                 }
 
@@ -151,16 +171,17 @@
     }
 
     public ItemStack getItem() {
-        ItemStack itemStack = new ItemStack(BannerBlock.byColor(this.baseColor));
+        ItemStack itemstack = new ItemStack(BannerBlock.byColor(this.baseColor));
+
         if (this.itemPatterns != null && !this.itemPatterns.isEmpty()) {
-            itemStack.getOrCreateTagElement("BlockEntityTag").put("Patterns", this.itemPatterns.copy());
+            itemstack.getOrCreateTagElement("BlockEntityTag").put("Patterns", this.itemPatterns.copy());
         }
 
         if (this.name != null) {
-            itemStack.setHoverName(this.name);
+            itemstack.setHoverName(this.name);
         }
 
-        return itemStack;
+        return itemstack;
     }
 
     public DyeColor getBaseColor() {
